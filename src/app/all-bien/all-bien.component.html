<div class="b-example-divider"></div>

<div class="px-4 pt-5 my-5 text-center border-bottom " >
  <main>
    <div class="row g-6">

      <div class="col-md-3">
        <div class="position-sticky" style="top: 2rem;">
          <div class="p-4 mb-3 ">
            <p class="text-center">{{nbComte}} comptes actifs.</p>
            <app-img-header></app-img-header>
            <h4 class="fst-italic"></h4>
            <div>
              <form [formGroup]="rechercheForm">
                <div class="col">
                  <label class="form-label"></label>
                  <select #type class="form-select"  aria-label="Default select example" formControlName="typeBien" (change)="enventTB()">
                    <option value="defaults" selected>Type de Bien</option>
                    <option  *ngFor="let t of listTypeBien; let i = index" value="{{i}}">{{t.nom}}</option>
                  </select>
                </div>
                <br>
                <div class="col">
                  <label class="form-label"></label>
                  <select #provinces class="form-select" aria-label="Default select example" formControlName="province" (change)="enventProvince()">
                    <option value="defaults" selected>Par Province</option>
                    <option *ngFor="let p of listProvince; let i = index" value="{{i}}">{{p.nomprovince}}</option>
                  </select>
                  <img class="rounded-lg-3" src="data:image/jpeg;base64,{{this.imgProvince}}"  width="80%" height="80%" alt="TSHISHI création" *ngIf="rechercheForm.value.province != 'defaults' && this.imgProvince">

                </div>
                <br>
                <div class="col" *ngIf="rechercheForm.value.province != 'defaults'">
                <label class="form-label"></label>
                <select #villes class="form-select" aria-label="Default select example" formControlName="ville" (change)="enventVille()" >
                  <option value="defaults" selected>Par Ville</option>
                  <option *ngFor="let v of listVille; let i = index" value="{{i}}">{{v.nomVille}}</option>
                </select>
                <img class="rounded-lg-3" src="data:image/jpeg;base64,{{this.imgVille}}"  width="80%" height="80%" alt="TSHISHI création" *ngIf="rechercheForm.value.ville != 'defaults' && this.imgVille">
              </div>
              </form>
              <div class="col">
                <button type="button" class="btn btn-success" (click)="loadData()">Faire la recherche</button>
              </div>
              <div class="col p-5">
                <button type="button" class="btn btn-primary" (click)="resetReserche()">Réinitialiser</button>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="col-md-9">
        <div class="row text-lg-start">

          <div class="col"><h3><h1>{{titreProvince}}</h1>{{textProvince}}</h3></div>
          <div class="col"><h3><h1>{{titreVille}}</h1>{{textVille}}</h3></div>
        </div>

        <article class="blog-post">
          <nav  aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
              <li class="page-item" [ngClass]="{disabled: currentPage <=1}"><a class="page-link" (click)="prev()">Previous</a></li>
              <li *ngFor="let v of nbPage|range" class="page-item" [ngClass]=" currentPage === v? 'active' : 'disabled'" (click)="change(v)"><a class="page-link" href="#">{{v}}</a></li>
              <li [ngClass]="{disabled: currentPage >= nbPage}" class="page-item"><a class="page-link" (click)="next()">Next</a></li>
            </ul>
          </nav>
          <div class="biens row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 " *ngIf="!isLoading">
            <div class="bien col" *ngFor="let b of listBien ">
              <app-one-bien [b]="b"></app-one-bien>
            </div>
          </div>
          <div *ngIf="isLoading">
            <div class="row">
              <div class="col-4 position-sticky"><app-message-dattente class="align-items-center"></app-message-dattente></div>
              <div class="col-4 position-sticky"><app-message-dattente class="align-items-center"></app-message-dattente></div>
              <div class="col-4 position-sticky"><app-message-dattente class="align-items-center"></app-message-dattente></div>
            </div>
          </div>
          <div class="mt-3">
            <nav  aria-label="Page navigation example">
              <ul class="pagination justify-content-center">
                <li class="page-item" [ngClass]="{disabled: currentPage <=1}"><a class="page-link" (click)="prev()">Previous</a></li>
                <li *ngFor="let v of nbPage|range" class="page-item" [ngClass]=" currentPage === v? 'active' : 'disabled'" (click)="change(v)"><a class="page-link" href="#">{{v}}</a></li>
                <li [ngClass]="{disabled: currentPage >= nbPage}" class="page-item"><a class="page-link" (click)="next()">Next</a></li>
              </ul>
            </nav>
          </div>
        </article>

      </div>
    </div>
  </main>
  <br>
  <br>
</div>

<div class="b-example-divider"></div>
